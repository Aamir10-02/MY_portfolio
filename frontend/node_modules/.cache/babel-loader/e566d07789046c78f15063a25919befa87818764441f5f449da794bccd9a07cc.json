{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import\"./FormStyles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Form=()=>{const[formData,setFormData]=useState({name:'',email:'',subject:'',message:''});const[errors,setErrors]=useState({});const[submitted,setSubmitted]=useState(false);const[showPopup,setShowPopup]=useState(false);const[csrfToken,setCsrfToken]=useState('');useEffect(()=>{const token=document.querySelector('[name=csrfmiddlewaretoken]');if(token){setCsrfToken(token.value);}},[]);const validate=()=>{let errors={};let valid=true;if(!formData.name){errors.name='Name is required';valid=false;}if(!formData.email){errors.email='Email is required';valid=false;}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){errors.email='Email address is invalid';valid=false;}if(!formData.subject){errors.subject='Subject is required';valid=false;}if(!formData.message){errors.message='Message is required';valid=false;}setErrors(errors);return valid;};// Inside Form component\nconst handleSubmit=async e=>{e.preventDefault();if(validate()){try{const response=await axios.post('http://13.40.210.180/form/',formData,{headers:{'X-CSRFToken':csrfToken,'Content-Type':'application/json'// Ensure content type is set\n}});console.log(response.data);setSubmitted(true);setFormData({name:'',email:'',subject:'',message:''});setErrors({});setShowPopup(true);setTimeout(()=>setShowPopup(false),3000);// Hide popup after 3 seconds\n}catch(error){console.error(\"There was an error submitting the form!\",error);}}};const handleChange=e=>{const{name,value}=e.target;setFormData(prevState=>({...prevState,[name]:value}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"csrfmiddlewaretoken\",value:csrfToken}),/*#__PURE__*/_jsx(\"label\",{children:\"Your Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange}),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.name}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.email}),/*#__PURE__*/_jsx(\"label\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"subject\",value:formData.subject,onChange:handleChange}),errors.subject&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.subject}),/*#__PURE__*/_jsx(\"label\",{children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"6\",placeholder:\"Type your message here\",name:\"message\",value:formData.message,onChange:handleChange}),errors.message&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.message}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Submit\"})]}),showPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:\"Form submitted successfully!\"})]});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Form","formData","setFormData","name","email","subject","message","errors","setErrors","submitted","setSubmitted","showPopup","setShowPopup","csrfToken","setCsrfToken","token","document","querySelector","value","validate","valid","test","handleSubmit","e","preventDefault","response","post","headers","console","log","data","setTimeout","error","handleChange","target","prevState","className","children","onSubmit","type","onChange","rows","placeholder"],"sources":["D:/my-portfolio/frontend/src/components/Form.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport \"./FormStyles.css\";\r\n\r\nconst Form = () => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    subject: '',\r\n    message: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [csrfToken, setCsrfToken] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = document.querySelector('[name=csrfmiddlewaretoken]');\r\n    if (token) {\r\n      setCsrfToken(token.value);\r\n    }\r\n  }, []);\r\n\r\n  const validate = () => {\r\n    let errors = {};\r\n    let valid = true;\r\n\r\n    if (!formData.name) {\r\n      errors.name = 'Name is required';\r\n      valid = false;\r\n    }\r\n    if (!formData.email) {\r\n      errors.email = 'Email is required';\r\n      valid = false;\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      errors.email = 'Email address is invalid';\r\n      valid = false;\r\n    }\r\n    if (!formData.subject) {\r\n      errors.subject = 'Subject is required';\r\n      valid = false;\r\n    }\r\n    if (!formData.message) {\r\n      errors.message = 'Message is required';\r\n      valid = false;\r\n    }\r\n\r\n    setErrors(errors);\r\n    return valid;\r\n  };\r\n// Inside Form component\r\nconst handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  if (validate()) {\r\n    try {\r\n      const response = await axios.post('http://13.40.210.180/form/', formData, {\r\n        headers: {\r\n          'X-CSRFToken': csrfToken,\r\n          'Content-Type': 'application/json' // Ensure content type is set\r\n        }\r\n      \r\n      });\r\n      console.log(response.data);\r\n      setSubmitted(true);\r\n      setFormData({\r\n        name: '',\r\n        email: '',\r\n        subject: '',\r\n        message: ''\r\n      });\r\n      setErrors({});\r\n      setShowPopup(true);\r\n      setTimeout(() => setShowPopup(false), 3000); // Hide popup after 3 seconds\r\n    } catch (error) {\r\n      console.error(\"There was an error submitting the form!\", error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prevState => ({\r\n      ...prevState,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"form\">\r\n      <form onSubmit={handleSubmit}>\r\n        <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrfToken} />\r\n        <label>Your Name</label>\r\n        <input \r\n          type=\"text\" \r\n          name=\"name\" \r\n          value={formData.name} \r\n          onChange={handleChange} \r\n        />\r\n        {errors.name && <p className=\"error\">{errors.name}</p>}\r\n\r\n        <label>Email</label>\r\n        <input \r\n          type=\"email\" \r\n          name=\"email\" \r\n          value={formData.email} \r\n          onChange={handleChange} \r\n        />\r\n        {errors.email && <p className=\"error\">{errors.email}</p>}\r\n\r\n        <label>Subject</label>\r\n        <input \r\n          type=\"text\" \r\n          name=\"subject\" \r\n          value={formData.subject} \r\n          onChange={handleChange} \r\n        />\r\n        {errors.subject && <p className=\"error\">{errors.subject}</p>}\r\n\r\n        <label>Message</label>\r\n        <textarea \r\n          rows=\"6\" \r\n          placeholder=\"Type your message here\" \r\n          name=\"message\" \r\n          value={formData.message} \r\n          onChange={handleChange} \r\n        />\r\n        {errors.message && <p className=\"error\">{errors.message}</p>}\r\n\r\n        <button className=\"btn\" type=\"submit\">Submit</button>\r\n      </form>\r\n\r\n      {showPopup && <div className=\"popup\">Form submitted successfully!</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Form;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}